/* KIMB Downloader -- Copyright 2015 by https://www.KIMB-technologies.eu --  https://www.gnu.org/licenses/gpl-3.0 */
function delfile(a,d,e,b){"folder"==a?$("#filemanagerdel").html("<p><span class='ui-icon ui-icon-alert' style='float:left; margin:0 7px 20px 0;'></span>M\u00f6chten Sie den Ordner &apos;"+b+"&apos; wirklich l\u00f6schen?</p>"):$("#filemanagerdel").html("<p><span class='ui-icon ui-icon-alert' style='float:left; margin:0 7px 20px 0;'></span>M\u00f6chten Sie die Datei &apos;"+b+"&apos; wirklich l\u00f6schen?</p>");$("#filemanagerdel").css("display","block");$("#filemanagerdel").dialog({resizable:!1,
height:200,modal:!0,buttons:{"L\u00f6schen":function(){$(this).dialog("close");window.location=allgsys_siteurl+"/backend.php?todo=explorer&del="+d+"&art="+a+"&path="+e;return!0},Abbrechen:function(){$(this).dialog("close");return!1}}})}var clipboard="string"===typeof localStorage.getItem("clipboard")?JSON.parse(localStorage.getItem("clipboard")):[];$(window).unload(function(){localStorage.setItem("clipboard",JSON.stringify(clipboard))});
function add_file_clipboard(a,d){var e={},b=!0;$.each(clipboard,function(a,e){d==e.path&&(b=!1)});b&&(e.file=a,e.path=d,clipboard.push(e));show_clipboard();return!0}
function show_clipboard(){var a="<table width='100%'>",d=!1;$.each(clipboard,function(e,b){a+="<tr>";a+="<td title='"+decodeURIComponent(b.path)+"'>"+b.file+"</td>";a+="<td> <span class='ui-icon ui-icon-trash' title='Datei aus Zwischenablage l\u00f6schen' style='display:inline-block;' onclick='del_clipboard( id );'></span> </td>";a+="<td> <span class='ui-icon ui-icon-pin-s' title='Datei in den aktuellen Ordner setzen (kopieren oder verschieben)' style='display:inline-block;' onclick='rename_copy_clipboard( \""+b.path+
'", "'+b.file+'" , '+e+" );'></span></td>";a+="</tr>";d=!0});d||(a+="<i>Keine Elemente</i>");a+="</table>";$("div#clipboard").html(a);$("div#clipboard").css("display","block");$("div#clipboard").dialog({resizable:!0,modal:!0,buttons:{"Schlie\u00dfen":function(){$(this).dialog("close")}}})}function del_clipboard(a){clipboard.splice(a,1);$("div#clipboard").dialog("close");show_clipboard()}
function new_name_clipboard(){var a=$("input[name=clipboard_file]").val(),d=!1;$.each(php_pathfiles,function(e,b){b==a&&(d=!0)});d?$("i#clipboard_replaceatt").css("display","inline-block"):$("i#clipboard_replaceatt").css("display","none")}
function rename_copy_clipboard(a,d,e){var b=php_pathnow,c;c="<h3>Verschieben &amp; kopieren</h3>"+('<form action="'+allgsys_siteurl+"/backend.php?todo=explorer&amp;path="+b+'" method="post" id="clipboard_form">');c+='<input type="text" readonly="readonly" name="clipboard_oldpath"> (Dateiquelle)<br /><input type="text" readonly="readonly" name="clipboard_newpath"> (Dateiziel)<br />';c+='<input type="text" name="clipboard_file" onkeyup="new_name_clipboard();" onchange="new_name_clipboard();" > (Dateiname)<br />';
c+='<i id="clipboard_replaceatt" style="display:none; color:red;><span class="ui-icon ui-icon-info"  title="Die Datei wird \u00fcberschrieben, sofern Sie auf Los klicken!" style="display:inline-block;"></span> Dateiname schon vergeben</i><br />';c+='<input type="radio" name="clipboard_art" value="rename" checked="checked">  (verschieben)<br />';c+='<input type="radio" name="clipboard_art" value="copy"> (kopieren) ';c+="</form>";$("div#clipboard").html(c);$("div#clipboard").dialog("option","buttons",
[{text:"Los",click:function(){clipboard.splice(e,1);$("form#clipboard_form").submit()}},{text:"Abbrechen",click:function(){$(this).dialog("close")}}]);$("input[name=clipboard_file]").val(decodeURIComponent(d));$("input[name=clipboard_oldpath]").val(decodeURIComponent(a));$("input[name=clipboard_newpath]").val(decodeURIComponent(b));new_name_clipboard()};
